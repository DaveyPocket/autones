#include <avr/pgmspace.h>
#include <avr/io.h>
#include <avr/interrupt.h>

#define ARRAY_SIZE(array) (sizeof((array))/sizeof((array[0])))

#define dataShift 2
#define dataMask (1 << dataShift)

#define debugPortDMask 0b11110000
#define debugPortBMask 0b00001111

// Off, A, B, sElect, Start, Up, Down, Left, Right
#define O (0 << 0)
#define A (1 << 0)
#define B (1 << 1)
#define E (1 << 2)
#define S (1 << 3)
#define U (1 << 4)
#define D (1 << 5)
#define L (1 << 6)
#define R (1 << 7)

#define HZ 60

uint8_t button_number;

struct frame {
  uint16_t length;
  uint8_t buttons;
};
// a movie is how many frames * what buttons to press
// This is excitebike
struct frame movie[] = {{9,0},{1,4},{1,0},{1,8},{42,0},{1,8},{626,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{1,0},{22,146},{18,162},{30,146},{147,2},{25,162},{31,2},{1,130},{1,128},{2,0},{1,64},{1,128},{2,0},{1,64},{1,128},{2,0},{1,64},{1,128},{2,0},{1,64},{1,128},{2,0},{1,64},{1,128},{2,0},{1,64},{1,128},{2,0},{1,64},{1,128},{2,0},{1,64},{1,128},{2,0},{1,64},{1,128},{2,0},{1,64},{1,128},{2,0},{1,64},{1,128},{2,0},{26,128},{16,146},{3,130},{1,146},{3,82},{1,146},{2,0},{1,64},{1,128},{2,0},{1,64},{1,128},{2,0},{1,64},{1,128},{2,0},{1,64},{1,128},{2,0},{1,64},{1,128},{2,0},{1,64},{1,128},{2,0},{1,64},{1,128},{2,0},{1,64},{1,128},{2,0},{1,64},{1,128},{1,64},{1,0},{33,162},{2,2},{8,146},{2,162},{3,130},{5,146},{9,2},{25,66},{6,2},{1,130},{3,2},{1,130},{1,2},{1,66},{1,2},{1,130},{1,2},{1,66},{1,2},{1,130},{1,2},{1,66},{1,2},{1,130},{1,2},{1,66},{1,2},{1,130},{1,2},{1,66},{1,2},{1,130},{1,2},{1,66},{1,2},{1,130},{1,2},{1,66},{1,2},{1,130},{1,2},{1,66},{1,2},{1,130},{1,2},{1,66},{1,2},{13,128},{4,130},{19,128},{1,130},{3,128},{1,130},{3,128},{1,162},{3,128},{1,130},{3,128},{1,130},{2,128},{1,144},{1,130},{3,128},{1,130},{3,128},{1,130},{3,128},{1,130},{3,128},{1,130},{3,128},{1,130},{3,128},{1,130},{3,128},{1,130},{3,128},{1,130},{3,128},{1,130},{3,128},{1,130},{3,128},{1,130},{2,128},{1,160},{1,130},{3,128},{1,130},{3,128},{1,130},{1,128},{15,2},{7,66},{1,130},{1,66},{2,2},{1,130},{1,66},{2,2},{1,130},{1,66},{2,0},{1,128},{1,64},{2,0},{1,128},{1,64},{2,0},{1,128},{1,64},{2,0},{1,128},{1,64},{2,0},{1,128},{1,64},{2,0},{1,128},{1,64},{2,0},{1,128},{1,64},{2,0},{36,128},{1,146},{4,2},{3,0},{1,2},{3,0},{1,162},{3,0},{1,2},{3,0},{1,2},{3,0},{1,162},{3,0},{1,162},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,146},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,146},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{19,2},{4,66},{1,2},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{20,128},{9,130},{1,2},{25,162},{4,2},{1,146},{17,2},{7,146},{1,147},{10,146},{5,2},{3,130},{43,128},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{4,128},{1,130},{5,2},{1,146},{4,128},{2,0},{3,128},{2,0},{32,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{2,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{1,64},{1,0},{1,128},{1,0},{23,128},{49,130},{2,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{21,128},{1,0},{1,64},{1,0},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{24,128},{1,162},{33,2},{1,162},{3,2},{1,146},{6,2},{8,146},{2,130},{43,2},{85,130},{1,66},{31,130},{1,66},{3,130},{1,66},{3,130},{1,66},{3,130},{1,66},{7,130},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{67,128},{1,64},{3,128},{1,64},{3,128},{1,66},{3,130},{1,66},{3,130},{1,66},{3,130},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{2,128},{7,130},{2,2},{15,130},{17,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{2,128},{4,130},{1,146},{5,130},{1,67},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,130},{3,66},{1,130},{3,66},{9,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,128},{2,64},{1,66},{1,130},{3,128},{1,2},{4,130},{1,66},{21,130},{2,128},{3,64},{1,128},{2,64},{1,66},{41,162},{1,66},{3,130},{1,66},{3,130},{1,66},{3,130},{1,66},{14,162},{3,130},{7,162},{9,130},{9,128},{15,64},{31,65},{46,64},{233,0},{2,8},{13,0},{5,8},{8,0},{4,8},{7,0},{4,8},{7,0},{4,8},{7,0},{5,8},{7,0},{4,8},{8,0},{4,8},{7,0},{5,8},{9,0},{4,8},{8,0},{3,8},{8,0},{4,8},{8,0},{5,8},{8,0},{4,8},{9,0},{4,8},{10,0},{4,8},{9,0},{4,8},{8,0},{4,8},{8,0},{5,8},{8,0},{5,8},{8,0},{4,8},{8,0},{4,8},{8,0},{3,8},{1,0},{1,8},{8,0},{3,8},{8,0},{4,8},{9,0},{5,8},{8,0},{4,8},{13,0},{4,8},{12,0},{2,8},{10,0},{3,8},{10,0},{5,8},{8,0},{5,8},{7,0},{5,8},{8,0},{5,8},{8,0},{5,8},{7,0},{4,8},{6,0},{6,8},{14,0},{4,8},{10,0},{4,8},{9,0},{5,8},{7,0},{5,8},{8,0},{5,8},{10,0},{4,8},{173,0},{14,66},{22,82},{15,98},{1,162},{6,98},{25,82},{1,146},{6,82},{13,162},{11,82},{5,146},{3,162},{5,82},{12,98},{1,66},{1,130},{18,66},{1,130},{9,66},{10,130},{9,66},{9,130},{1,2},{13,66},{1,2},{13,66},{1,2},{13,66},{1,2},{3,66},{1,146},{9,66},{1,0},{1,2},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{4,2},{1,66},{3,64},{1,128},{3,64},{37,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{4,130},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,130},{12,98},{4,162},{3,98},{1,130},{3,66},{9,130},{12,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{21,128},{2,130},{1,66},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{15,82},{1,80},{5,82},{1,80},{2,82},{2,2},{2,66},{1,2},{6,66},{1,2},{4,130},{44,128},{1,64},{3,130},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{3,66},{1,130},{12,66},{3,64},{1,66},{3,64},{1,66},{1,34},{2,0},{1,66},{3,64},{1,66},{3,64},{1,66},{3,96},{1,98},{3,96},{1,98},{3,96},{1,98},{3,96},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{13,82},{1,80},{5,82},{1,2},{13,82},{1,80},{1,82},{4,66},{1,2},{8,66},{3,128},{1,130},{29,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,160},{2,96},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,96},{1,98},{3,96},{1,98},{3,96},{1,98},{3,96},{1,98},{3,96},{1,98},{3,96},{1,98},{3,96},{1,98},{3,80},{1,82},{1,80},{5,82},{1,80},{4,82},{1,18},{13,82},{6,80},{10,2},{1,66},{5,2},{36,130},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{7,130},{1,99},{7,98},{1,99},{7,98},{1,99},{3,98},{4,66},{1,67},{8,66},{1,82},{3,66},{1,64},{5,66},{1,64},{5,66},{29,130},{15,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{6,130},{5,146},{1,0},{3,128},{1,0},{36,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{23,128},{1,64},{3,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{3,128},{59,130},{5,162},{14,130},{4,128},{1,66},{3,130},{1,66},{3,130},{1,66},{3,130},{1,66},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{44,130},{1,66},{3,130},{1,66},{3,130},{1,66},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{2,128},{1,130},{1,66},{4,2},{7,66},{8,2},{2,130},{46,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{1,128},{2,144},{32,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{59,128},{1,66},{2,130},{41,128},{1,64},{5,130},{18,66},{10,98},{8,82},{9,66},{12,98},{2,66},{7,98},{1,96},{2,98},{3,82},{1,80},{5,82},{1,80},{4,82},{1,130},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{37,130},{1,66},{3,130},{1,66},{6,130},{47,66},{1,82},{10,66},{2,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{1,64},{2,66},{1,130},{1,66},{3,130},{1,66},{31,130},{1,66},{3,130},{3,64},{1,128},{3,64},{1,128},{2,64},{8,128},{1,0},{1,128},{1,64},{2,0},{2,128},{2,0},{1,128},{1,64},{2,0},{3,128},{1,0},{1,128},{1,64},{2,0},{1,128},{1,64},{2,0},{1,128},{1,64},{2,0},{1,128},{1,64},{2,0},{1,128},{1,64},{2,0},{1,128},{1,64},{2,0},{1,128},{1,64},{2,0},{1,128},{1,64},{2,0},{1,128},{1,64},{2,0},{1,128},{1,64},{2,0},{1,128},{1,64},{2,0},{1,128},{1,64},{2,0},{1,128},{1,64},{2,98},{1,162},{1,98},{111,128},{1,64},{37,130},{10,128},{944,0},{139,2},{1,146},{13,2},{22,146},{7,2},{1,160},{1,162},{3,160},{1,162},{3,160},{1,162},{3,160},{1,162},{3,160},{1,162},{3,160},{1,162},{3,160},{1,162},{3,160},{1,162},{3,160},{1,162},{3,160},{1,162},{3,144},{1,146},{3,144},{1,146},{3,144},{1,146},{3,144},{1,146},{3,144},{1,146},{3,144},{1,146},{1,128},{1,144},{1,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{1,0},{1,146},{25,2},{5,130},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{67,130},{2,128},{1,64},{22,130},{1,64},{3,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{41,128},{1,64},{5,130},{5,128},{1,130},{44,128},{1,64},{15,130},{1,64},{3,130},{6,2},{10,162},{12,130},{1,66},{2,64},{1,128},{3,64},{45,128},{1,64},{23,162},{1,64},{3,128},{1,130},{62,2},{1,162},{46,128},{1,64},{3,128},{1,66},{17,146},{4,0},{4,2},{4,0},{4,2},{4,0},{4,2},{4,0},{4,2},{4,0},{4,2},{4,3},{11,2},{5,3},{2,147},{1,128},{1,0},{3,128},{1,0},{3,128},{1,0},{17,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{71,128},{1,64},{3,130},{23,128},{8,162},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{2,98},{1,162},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{26,162},{3,146},{5,130},{4,2},{2,162},{12,2},{29,146},{26,2},{12,162},{2,2},{1,146},{32,2},{2,162},{55,2},{19,130},{50,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,66},{4,130},{1,146},{47,2},{16,130},{59,128},{1,130},{1,66},{10,130},{3,128},{2,64},{2,128},{2,64},{2,128},{2,64},{2,128},{2,64},{2,128},{2,64},{2,128},{2,64},{2,128},{2,64},{2,128},{2,64},{2,128},{2,64},{2,128},{2,64},{2,128},{2,64},{2,128},{2,64},{2,128},{2,64},{2,128},{2,64},{2,128},{2,64},{2,128},{2,64},{2,128},{2,64},{2,128},{2,64},{17,128},{1,130},{5,162},{19,130},{1,146},{31,2},{3,130},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{38,128},{4,130},{2,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{3,130},{16,128},{94,160},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{28,162},{123,2},{1,146},{16,2},{1,162},{9,130},{1,146},{6,130},{1,162},{7,130},{1,146},{4,130},{8,146},{1,130},{11,146},{1,130},{4,0},{14,2},{29,64},{19,128},{949,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{21,146},{44,2},{1,66},{63,2},{1,66},{17,2},{1,66},{43,2},{28,66},{25,130},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{1,128},{5,130},{2,128},{2,64},{1,128},{3,64},{2,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{27,128},{1,64},{7,128},{1,64},{1,128},{20,2},{3,130},{23,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{3,128},{3,2},{22,130},{6,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{5,130},{17,2},{1,162},{12,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,146},{3,0},{1,2},{3,0},{1,2},{6,130},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{4,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{1,128},{1,64},{2,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{5,128},{1,130},{27,2},{5,130},{1,66},{2,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{67,128},{2,2},{3,0},{1,2},{3,0},{10,2},{2,64},{22,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{3,128},{5,162},{88,2},{1,146},{121,2},{1,162},{12,2},{1,146},{15,2},{1,146},{7,2},{1,66},{26,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{61,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{2,130},{2,2},{1,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{2,0},{1,66},{31,2},{1,66},{9,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{1,162},{10,2},{7,34},{1,66},{14,2},{1,146},{3,2},{38,66},{2,130},{11,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{4,2},{3,130},{6,128},{2,64},{1,128},{3,64},{1,128},{3,64},{22,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{3,128},{1,130},{2,2},{1,162},{15,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{1,144},{2,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,66},{5,130},{5,128},{1,66},{2,130},{3,66},{1,130},{3,66},{1,130},{16,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{3,64},{1,128},{3,64},{1,130},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{1,64},{83,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{8,2},{1,146},{1,162},{58,2},{1,162},{10,2},{1,146},{5,2},{1,162},{33,2},{1,146},{15,130},{2,128},{978,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,146},{3,144},{1,146},{3,144},{1,146},{3,144},{1,146},{3,144},{1,146},{3,144},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{1,144},{2,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,162},{3,160},{1,162},{3,160},{1,162},{3,160},{1,162},{3,160},{1,162},{3,160},{1,162},{3,160},{1,162},{3,160},{1,162},{3,160},{1,162},{3,160},{1,146},{3,0},{1,2},{3,0},{1,2},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{1,66},{3,64},{6,66},{6,2},{5,146},{9,144},{12,128},{2,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,130},{19,162},{14,160},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{3,130},{6,2},{1,162},{6,2},{10,82},{7,18},{4,66},{1,82},{14,66},{1,98},{1,34},{11,98},{9,130},{58,128},{1,64},{3,130},{56,128},{1,64},{5,130},{8,128},{7,144},{12,146},{12,2},{1,162},{54,2},{8,162},{4,146},{8,130},{3,128},{3,64},{1,128},{3,64},{1,128},{3,64},{41,128},{1,64},{4,162},{5,160},{16,128},{9,130},{1,2},{20,146},{45,130},{51,128},{10,130},{56,128},{1,64},{3,130},{23,128},{16,130},{5,162},{70,128},{1,64},{6,162},{12,160},{18,128},{13,146},{11,162},{5,130},{48,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{2,128},{2,130},{26,128},{17,130},{2,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{1,130},{63,128},{1,64},{3,144},{1,82},{1,146},{9,144},{10,128},{33,2},{1,146},{7,2},{18,162},{3,146},{1,162},{6,130},{5,146},{1,130},{7,2},{15,162},{1,2},{4,146},{4,162},{23,146},{10,2},{10,146},{3,2},{21,162},{2,130},{6,146},{5,2},{19,82},{1,80},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{3,146},{57,162},{5,82},{10,98},{1,82},{14,98},{11,82},{21,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,66},{3,130},{2,128},{5,144},{33,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,130},{1,66},{3,130},{12,82},{10,98},{2,66},{4,2},{6,146},{13,2},{3,66},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{1,64},{20,130},{16,2},{5,130},{1,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{74,128},{4,130},{2,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,66},{1,130},{3,66},{1,130},{2,66},{1,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{56,130},{35,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{1,130},{3,66},{45,130},{17,162},{5,130},{6,2},{1,146},{11,2},{1,162},{14,2},{1,162},{1,0},{2,160},{1,162},{3,160},{1,162},{3,160},{8,162},{16,146},{11,66},{98,64},{32,128},{865,0},{23,2},{3,0},{1,2},{3,0},{1,2},{3,144},{1,146},{3,144},{1,146},{3,144},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,146},{3,0},{1,2},{3,0},{1,2},{1,0},{2,160},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{1,2},{3,0},{56,2},{21,146},{5,162},{70,2},{19,162},{15,2},{10,146},{7,162},{12,146},{3,130},{14,2},{2,66},{2,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{41,128},{1,64},{3,128},{1,64},{3,130},{28,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{7,130},{42,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{1,130},{3,2},{26,162},{1,130},{2,162},{43,146},{24,162},{13,146},{20,2},{6,130},{4,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{7,128},{1,64},{5,128},{3,130},{6,128},{3,64},{1,128},{3,64},{1,128},{3,64},{50,128},{1,64},{3,128},{1,64},{2,128},{63,130},{42,128},{2,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{35,130},{14,128},{1,64},{3,128},{1,64},{7,130},{3,162},{81,128},{1,64},{3,128},{1,64},{3,128},{3,130},{1,128},{2,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{47,162},{2,128},{2,64},{1,128},{3,64},{42,128},{2,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{12,128},{4,146},{7,128},{19,144},{5,130},{3,128},{2,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{5,128},{26,130},{35,162},{7,146},{12,162},{5,130},{13,82},{6,98},{15,82},{20,66},{2,130},{99,128},{1,64},{7,130},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{1,128},{3,64},{26,128},{19,64},{3,66},{1,130},{3,66},{57,130},{1,66},{12,130},{39,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{3,128},{1,64},{44,128}};

uint16_t movie_size = ARRAY_SIZE(movie);
uint16_t index = 0;

uint16_t framesLeft = movie[0].length;
uint8_t buttons = ~(movie[0].buttons);

int main(void) {
  DDRB |= debugPortBMask;
  DDRD |= debugPortDMask;
  DDRC |= 0b00000100; // pinMode(A2, OUTPUT)
  EICRA = 0b00001111; // INT0,INT1 RISING
  EIMSK = 0b00000011; // Enable INT0, INT1
  PORTC |= dataMask;  // digitalWrite(A2, HIGH)
  sei(); // enable interrupts

  while(1){ };
  return 1;
}

// latch
ISR(INT0_vect) {
  button_number = 0;
  if(framesLeft == 0 && index < movie_size - 1){
    index++;
    framesLeft = movie[index].length;
  }
  buttons = ~(movie[index].buttons);
  PORTD = (PORTD & ~debugPortDMask) | (~buttons & debugPortDMask);
  PORTB = (PORTB & ~debugPortBMask) | (~buttons & debugPortBMask);
  PORTC = (PORTC & ~dataMask) | ((buttons & 1) << dataShift);
  framesLeft--;
}

// clock
ISR(INT1_vect) {
  button_number++;
  buttons >>= 1;
  if(button_number < 8){
    PORTC = (PORTC & ~dataMask) | ((buttons & 1) << dataShift);	
  } else {
    PORTC = (PORTC & ~dataMask) | (1 << dataShift);	
  }

}
